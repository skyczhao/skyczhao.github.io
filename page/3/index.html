<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 十三羽</title><meta name="description" content="A Blog Powered By Hexo"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-110577953-1"></script><script type="text/javascript">window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'UA-110577953-1');</script></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link active">BLOG</a></li><li class="nav-list-item"><a href="/archives" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/CV" target="_self" class="nav-list-link">CV</a></li><li class="nav-list-item"><a href="/about" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><ul class="home post-list"><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/04/12/tech-apue-file-io/" class="post-title-link">UNIX文件I/O</a></h2><div class="post-info">Apr 12, 2018</div><div class="post-content"><p>今天说下文件这个主题。</p>
<p>为什么说到这个？一个重要的原因，UNIX几乎把所有东西都看成文件对待。这也是UNIX简洁的一个体现，可以用一套理念理解系统内大部分原理。另外，越常见越常用的东西其实越难掌握可理解。所谓大道至简，而看似简单其实并不代表容易。</p>
<p>接下来会先描述内核读取文件的数据结构，再总结文件操作函数等。在APUE中，文件I/O这章是先通过文件函数引入进行说明的，这种组织方式便于实际应用以及开发。而本文作为总结就没有按这种方式。</p></div><a href="/2018/04/12/tech-apue-file-io/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/04/11/tech-apue-process-communcation/" class="post-title-link">理解进程间通信</a></h2><div class="post-info">Apr 11, 2018</div><div class="post-content"><p>进程、线程一类的，其实接触得挺早，但是没有深入使用。最早认识多进程多线程，是在学校网络中心参加一个并行计算比赛时了解的。但是建立的认识就是MPI、OPENMP之类的。然后没了解多久，就开始了GPU和PHI的调用了。</p>
<p>真要自己说清楚进程线程的区别，还真是比较难。一方面很早接触就往应用上走，没有深入了解实现原理；另一方面轮子封装得实在是好，一些坑早就被趟平了，也就没机会接触到。</p>
<p>然而这又是了解当今多核计算必不可缺的一环，短板还是得补上。</p>
<p>以前对进程通信方式的理解，就是两种，共享内存与消息同步。共享内存相当于定义共同访问空间；消息同步相当于发布者订阅者一类的方式。</p>
<p>不过这个理解还是比较狭隘的，或者还是十分简陋的。针对上述的理解，现在的我会质疑，共享内存怎么在进程间实现？那管道一类的方式又是属于哪种通信类型？事实上还不能简单以两种方式总结进程通信方式。</p>
<p>结合网上的资料以及手中的UNIX环境高级编程(APUE)，以下是本人对进程通信的新的理解。</p></div><a href="/2018/04/11/tech-apue-process-communcation/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/04/10/tech-java-concurrency-in-practice-01/" class="post-title-link">Java并发编程实践-笔记01</a></h2><div class="post-info">Apr 10, 2018</div><div class="post-content"><p>自己立的flag，要自己扛起来。周日(2018.04.08)看了辉哥的一篇文章 - <a href="http://mp.weixin.qq.com/s/-DKeoKaoi00s2OYw95Jn0g" target="_blank" rel="noopener">用「三遍写作法」完成日更</a>，于是自己默默定下每天日更，无论长短。</p>
<p>最近感觉技术上走到瓶颈。要说解决问题、实现功能的，自己也可以完成，完成的质量也不会很差；但就感觉没有很理想，缺乏进阶一点的认知。自己在2017年尝试自己设计一个爬虫框架，有点过度设计的嫌疑，写到一半自己写不下去了；然后在工作中遇到小伙伴的问题，自己有时也会一问三不知，虽然会用，在自己的手下倒是都能用得很溜，但是对别人提出的问题就是无法解答。</p>
<p>自己也很郁闷，所以看书补充下知识。造成这种现状，其实跟自己实用主义的思想有关，很多技术、算法，仅仅停留于能用起来、能解决业务就停止了，没有进一步拓展。同时毕业之后也很少持续阅读和学习，于是短板一直没补上。经常会被内行人问到语塞。书籍是最好的老师，所以。</p>
<p>但从何阅读而起？犹豫的时候，看到知乎上的一篇回答 - <a href="http://daily.zhihu.com/story/9677545" target="_blank" rel="noopener">当年自学踩过无数坑，最后才发现「操作系统」应该这么学</a>。所以决定先按此路走一下，看下效果。也即从《Linux内核设计与实现》开始，然后APUE之类的。</p>
<p>这里是看到自己手上也有这么一本书，就顺手也看了。其他的书籍会在新的博文中跟进。</p></div><a href="/2018/04/10/tech-java-concurrency-in-practice-01/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/04/09/tech-java-thread-safe-singleton/" class="post-title-link">Java线程安全单例实现</a></h2><div class="post-info">Apr 9, 2018</div><div class="post-content"><p>碰巧在网上浏览到，就一起集中在这里。</p>
<p>以前写单例就一种方式，双重校验锁。但是现在稍微扩展一下。</p>
<p>开始前，先总结单例三要素：</p>
<ol>
<li>私有构造函数</li>
<li>私有静态持有自身对象</li>
<li>公有静态获取方法</li>
</ol></div><a href="/2018/04/09/tech-java-thread-safe-singleton/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2018/04/08/chat-wechat-with-game/" class="post-title-link">微信对游戏运用愈发炉火纯青</a></h2><div class="post-info">Apr 8, 2018</div><div class="post-content"><p>最初想到要写这一篇，应该是在2017年的12月底。所以把时间回拨到2017-12-28，有一个小版本的发布出现了一个巨型应用上。</p>
<p><a href="https://weixin.qq.com/cgi-bin/readtemplate?t=page/faq/ios/661/index&amp;faq=ios_661" target="_blank" rel="noopener">微信 6.6.1 for iOS 全新发布</a></p>
<p>没有别的APP发布能够吸引这么多关注。全民手游王者荣耀出小版本，也是经常的事情；评论才是主题的网易云音乐更新也没那么大阵仗；还有支付宝、天猫、淘宝、百度、今日头条等互联网流量金字塔顶部的APP，哪个更新都没有微信发个小版本这么震撼。</p>
<p>那其实微信在这个版本更新了啥？</p></div><a href="/2018/04/08/chat-wechat-with-game/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/12/28/conf-mysql5_5-ibdata1/" class="post-title-link">MySQL 5.5.45 数据文件过大优化</a></h2><div class="post-info">Dec 28, 2017</div><div class="post-content"><p>相信不少人都遇到过，MySQL运行一段时间后，ibdata1的文件会增长特别大。即使把数据删掉，ibdata1也没有减少。长久以往，磁盘空间早晚会被用光。<br>背后是因为InnoDB表的数据被集中存储在共享表空间ibdata中。在MySQL&lt;=5.6.5，innodb_file_per_table默认为0，InnoDB表数据没有按表划分存储。而除此之外，ibdata还存储着数据字典、双写缓冲区、undo log等。<br>当innodb_file_per_table为0时，ibdata会不断增大，有时会导致磁盘空间不足。通常是InnoDB表的数据导致的，undo log是次要原因。因为undo log的增加通常是在事务较为繁忙的时候，且事务中做了大量的更新操作，但是undo log占用的空间却可以被重用。InnoDB的purge线程就是负责清理不需要的undo log空间以供其他的undo log使用。</p>
<p>所以优化思路也就是：启用innodb_file_per_table。对于历史的数据表，需要重建才能使得配置生效。</p></div><a href="/2017/12/28/conf-mysql5_5-ibdata1/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/10/20/conf-opencv-with-android/" class="post-title-link">Android OpenCV开发环境配置</a></h2><div class="post-info">Oct 20, 2017</div><div class="post-content"></div><a href="/2017/10/20/conf-opencv-with-android/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/10/03/list-goods/" class="post-title-link">日常遇到的好东西</a></h2><div class="post-info">Oct 3, 2017</div><div class="post-content"><h2 id="写这个的原因"><a href="#写这个的原因" class="headerlink" title="写这个的原因"></a>写这个的原因</h2><p>信息爆炸，每天过脑子的消息太多太杂了。微信、微博、群聊、csdn、cnbeta等等，我们阅读消息的来源已经非常多。<br>总有一些好信息值得复用、参考。偶尔一见的好图片、惊世骇俗的论文等等，偶尔收集一下也有助于自己增长见识。</p>
<p>废话不多说，直接开始列出清单。</p></div><a href="/2017/10/03/list-goods/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2017/03/24/conf-debian-with-win10/" class="post-title-link">Win10下安装debian共存</a></h2><div class="post-info">Mar 24, 2017</div><div class="post-content"><p>曾经我也是个倒腾Linux系统安装的人。那时还是学生，对这个命令行像黑客一样的东西特别来劲。通常就花一个晚上到一天不等，就折腾个系统安装。看来有点浪费，不过折腾完系统的安装，现在在Linux上装啥都不怕了（●&gt;∀&lt;●）。循环依赖、源、网络配置、无人值守什么的都算是入了个门。不过自从用了Mac后，距离操作系统更远了，所以就没有怎么搞过。加上Linux本身又比较折腾，有时候不方便也没有那么空闲想来搞一搞。</p>
<p>最近某天，逛网的时候发现<a href="http://droidyue.com/blog/2016/08/22/before-you-buy-raspberry-pi/" target="_blank" rel="noopener">树莓派入手指南</a>，心里很是激动。又唤醒起学生时的兴奋，忽然间燃起来要搞它一搞=≡Σ((( つ•̀ω•́)つ。树莓派不贵，而且感觉比阿里云那些自定义程度更高了。于是就开始在网上搜教程，看了一圈发现技能可能生疏了，得重新拿回。装系统感觉像是一切的开端，那就搞吧。</p>
<p>于是在某天下班后速速回家装机。以前玩的时候还是笔记本、Win7加Linux各种发行版。但是现在Win10有secure boot、BIOS又有UEFI之类的东西，对安装Linux就是各种拦截哇。差点就连安装盘都进不去。满心欢喜装完，结果发现开不了机、卡在初始化后，看来不强行搞一番还对不起装机小能手的称号。</p>
<p>以下是记录时刻。太久没折腾，感觉好多都忘了。虽然装系统的机会不多了，但作为学生时代的情怀还是记录一发好了。</p></div><a href="/2017/03/24/conf-debian-with-win10/" class="read-more">...more</a></article></li><li class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2016/12/23/op-frequent-shell/" class="post-title-link">运维常用脚本</a></h2><div class="post-info">Dec 23, 2016</div><div class="post-content"><p>命令就在那，看自己组合使用。所以简单有简单的用法，复杂有复杂的用法。</p>
<h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><blockquote>
<p>如果非要选出个神器我觉得就它了吧</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 分割输出</span><br><span class="line">jps -m | grep Scheduler | awk &apos;&#123;print $1&#125;&apos;</span><br><span class="line"></span><br><span class="line"># 分割csv</span><br><span class="line">## 条件判断</span><br><span class="line">cat field.txt | awk &apos;&#123;print &quot;IF(ti.`&quot;$1&quot;` IS NULL, t.`&quot;$1&quot;`, ti.`&quot;$1&quot;`) AS `&quot;$1&quot;`,&quot;&#125;&apos; </span><br><span class="line">## 指定分隔符</span><br><span class="line">head t_weixin_account.csv | awk -F&apos;,&apos; &apos;&#123;print $5&quot;|&quot;$6&quot;|&quot;$8&quot;|&quot;$10&#125;&apos;</span><br></pre></td></tr></table></figure></div><a href="/2016/12/23/op-frequent-shell/" class="read-more">...more</a></article></li></ul></section><footer><div class="paginator"><a href="/page/2/" class="prev">PREV</a><a href="/page/4/" class="next">NEXT</a></div><div class="copyright"><p>Hosted by <a href="https://pages.github.com">Github Pages</a> / <a href="https://pages.coding.me">Coding Pages</a></p><p>© 2010 - 2020 <a href="http://www.thirteenyu.com">Tobin</a>, unless otherwise noted.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>